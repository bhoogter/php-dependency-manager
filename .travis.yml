language: php
branches:
  only:
    - master
    - /^.*[[:digit:]]+\.[[:digit:]]+\.[[:digit:]]+.*$/

php:
  - '7.2'
script: phpunit --bootstrap src/autoload.php --test-suffix '-test.php,Test.php,.phpt'
  tests
notifications:
  email: false

before_deploy:
  - composer phar:install-tools
  - composer install --prefer-dist --no-dev --no-interaction
  - php box.phar build
deploy:
  - provider: releases
    skip_cleanup: true
    file: php-dependency-manager.phar
    api_key:
      secure: "5j9qJVN1EeL7lCoIieZV++ozyIWzVrPS3v/f1gmCyp7aYsa2aXfugUUniqSYmaPAlZ9SWu7DjC7USfQcCwIhpitSG6KGlms9AkLTkyesxstphDFj0HBForgCrusYYbxcR/N+xr4I2vHx8Yg+g5iIeK/QNq+txnG/+NvZm/+57pBIwCfHnMO8sgUfGi0dt50yrwyln+RqxCvuMF9kz5EZMPfudYL/KrAIqTKnXJxcxc9UrcAf4/+mlFFpgA833OpmIiN1CcHPgrxDn9U01wGHTzE6fFOsUW5O5svHWw2rW1lxuH8k7upOIud0TVZKwuDlO3QBNNZc9qsp7NTeRbPZc1LXXwWxMk0gQIuFyuc0Crg/gUURaL2Yiwf14RMszuC0rZCs1sy04GyjbX3alnmDZ6rd8t9ghyW31WaCsH02Zw5DNrvM/crwwhkUZWfVQUPKjjsOL8mTywz8kZ2DEeb3PmDZbJ7ez/cGrFwt/KitmPzEDJUnk9WhBUekR9lvbOGmnRrUCrvBedb1YVI8QcaqsD0MSQxtY33y1aBKK7ygH5Kfpl/sI7SW687wDnxJSQmWe+1SfXeOVndcM8LJq+rxse8GuKx+QU5hUIhICBzakNvjHtI="
    on:
      repo: bhoogter/php-dependency-manager
      tags: true

